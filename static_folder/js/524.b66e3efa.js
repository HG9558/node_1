"use strict";(self.webpackChunkcoinDex=self.webpackChunkcoinDex||[]).push([[524],{4524:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var l=n(8473),a=n(4887),i=n(9197);const s={class:"withdrawal-area"},r={class:"withdrawal-main"},o={key:0},u=(0,l._)("b",null,null,-1),d=(0,l._)("i",null,null,-1),c={class:"withdrawal-receive"},h={class:"withdrawal-footer"},w=(0,l._)("h2",{class:"currency-popup-title"},"Select Bank",-1),m={class:"currency-popup-main"},k=["onClick"];n(7658);t=n(299),t={name:"currencyId",data(){return{curBank:{},reqCount:0,showBank:!1,money:"",password:"",refund:0,witObj:{},preventClick:!1,minMoney:0}},computed:{...(0,t.Se)(["getBanks","getUser","getIsGuoJi"]),curBankList(){return this.getBanks[1]}},watch:{curBankList:{handler(e){e.length<=0&&this.reqCount<1&&(++this.reqCount,this.reqUserBank({bankType:1})),1<=e.length&&(this.curBank=e[0])},immediate:!0}},created(){this.$http.get("withdrawInfo").then((e=>{if(1e3===e.code){let n="",l="";for(let a=0;a<e.data.length;a++){var t=e.data[a];if("withdrawCommission"===t.code&&(l=t.value),"withdrawAmountMinCny"===t.code&&(n=t.value),l&&n)break}this.refund=Number(l),this.minMoney=Number(n)}else this.$error(e.message)})),this.getWthMoney()},methods:{...(0,t.nv)(["reqUserBank","reqWallet"]),selectBank(e){e.id!==this.curBank.id&&(this.curBank=e)},sure(){var e;+this.money<=0?this.$error(this.$t("enterAmount")):+this.minMoney>+this.money?this.$error(this.$t("minWitAmount")+String(this.minMoney)+"CNY"):+this.witObj.optionBalance<this.money?this.$error(this.$t("exceedingBalance")):this.password?this.password.length<6?this.$error(this.$t("correctFundPW")):(e={money:this.money,password:this.password,bankId:this.curBank.id,coinCode:"CNY"},this.preventClick=!0,this.$http.post("withdraw",e).then((e=>{1e3===e.code?(this.money="",this.password="",this.$success(this.$t("witSuccess")),this.$router.back()):(this.preventClick=!1,this.$error(e.message)),setTimeout((()=>{this.preventClick=!1}),600)}))):this.$error(this.$t("enterFundPW"))},toRouter(e){this.$router.push({name:e})},getWthMoney(){this.$http.post("walletList").then((e=>{if(1e3===e.code&&0<e.data.length)for(let n=0;n<e.data.length;n++){var t=e.data[n];if("cny"===t.coinCode.toLocaleLowerCase()){this.witObj=t;break}}else this.$error(e.message)}))}}};var p=(0,n(9533).Z)(t,[["render",function(e,t,n,p,y,_){var g=(0,l.up)("v-header"),$=(0,l.up)("van-field"),b=(0,l.up)("van-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(g,{title:e.$t("bankWit")},null,8,["title"]),(0,l._)("section",s,[(0,l._)("article",r,[(0,l._)("dl",null,[(0,l._)("dt",null,(0,a.zw)(e.$t("withdrawalTo")),1),(0,l._)("dd",null,[1<=_.curBankList.length?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"withdrawal-bank",onClick:t[0]||(t[0]=e=>y.showBank=!0)},[(0,l.Uk)((0,a.zw)(y.curBank.bankName)+" ",1),y.curBank.cardNumber?((0,l.wg)(),(0,l.iD)("span",o," ("+(0,a.zw)(y.curBank.cardNumber.slice(-4))+") ",1)):(0,l.kq)("",!0),u])):((0,l.wg)(),(0,l.iD)("div",{key:1,class:"withdrawal-bank-add",onClick:t[1]||(t[1]=e=>_.toRouter("addBank"))},[d,(0,l.Uk)(" "+(0,a.zw)(e.$t("addBankCard")),1)]))])]),(0,l._)("dl",null,[(0,l._)("dt",null,[(0,l.Uk)((0,a.zw)(e.$t("amount"))+" ",1),(0,l._)("section",null,[(0,l._)("p",null,[(0,l.Uk)((0,a.zw)(e.$t("available"))+": ",1),(0,l._)("span",null,(0,a.zw)(y.witObj.optionBalance)+" "+(0,a.zw)(e.getIsGuoJi?"USDT":"CNY"),1)]),(0,l._)("p",null,[(0,l.Uk)((0,a.zw)(e.$t("minWitAmount"))+" ",1),(0,l._)("span",null,(0,a.zw)(y.minMoney)+" "+(0,a.zw)(e.getIsGuoJi?"USDT":"CNY"),1)])])]),(0,l._)("dd",null,[(0,l.Wm)($,{class:"withdrawal-input",maxlength:"25",modelValue:y.money,"onUpdate:modelValue":t[2]||(t[2]=e=>y.money=e),modelModifiers:{trim:!0},placeholder:"Minimum "+y.minMoney+(e.getIsGuoJi?" USDT":" CNY")},null,8,["modelValue","placeholder"])])]),(0,l._)("dl",null,[(0,l._)("dt",null,[(0,l.Uk)((0,a.zw)(e.$t("receiveAmount"))+" ",1),(0,l._)("section",null,[(0,l._)("p",null,[(0,l.Uk)((0,a.zw)(e.$t("refundFees"))+":",1),(0,l._)("span",null,(0,a.zw)(y.refund)+"%",1)])])]),(0,l._)("dd",null,[(0,l._)("div",c,(0,a.zw)(y.money&&+(y.money/(100*y.refund)).toFixed(2)),1)])]),(0,l._)("dl",null,[(0,l._)("dt",null,(0,a.zw)(e.$t("witPW")),1),(0,l._)("dd",null,[(0,l.Wm)($,{class:"withdrawal-input",maxlength:"15",modelValue:y.password,"onUpdate:modelValue":t[3]||(t[3]=e=>y.password=e),modelModifiers:{trim:!0},placeholder:e.$t("pw6to15")},null,8,["modelValue","placeholder"])])])]),(0,l._)("article",h,[(0,l._)("button",{class:(0,a.C_)([y.preventClick&&"disabled"]),type:"button",onClick:t[4]||(t[4]=e=>_.sure())},(0,a.zw)(e.$t("submit")),3)])]),(0,l.Wm)(b,{class:"currency-popup","close-on-click-overlay":!0,show:y.showBank,"onUpdate:show":t[5]||(t[5]=e=>y.showBank=e),position:"bottom",style:{backgroundColor:"#ffffff"}},{default:(0,l.w5)((()=>[w,(0,l._)("div",m,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(_.curBankList,((e,t)=>((0,l.wg)(),(0,l.iD)("dl",{key:t,onClick:t=>_.selectBank(e)},[(0,l._)("dt",null,[(0,l.Uk)((0,a.zw)(e.bankName)+" ",1),(0,l._)("span",null,"("+(0,a.zw)(e.cardNumber.slice(-4))+")",1)]),(0,l.wy)((0,l._)("dd",null,null,512),[[i.F8,e.id===y.curBank.id]])],8,k)))),128))])])),_:1},8,["show"])],64)}]])}}]);