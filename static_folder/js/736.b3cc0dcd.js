"use strict";(self.webpackChunkcoinDex=self.webpackChunkcoinDex||[]).push([[736],{4736:function(t,e,n){n.r(e),n.d(e,{default:function(){return k}});var l=n(8473),a=n(4887),i=n(9197);const s={class:"withdrawal-area"},r={class:"withdrawal-main"},o={key:0},d=(0,l._)("b",null,null,-1),u=(0,l._)("i",null,null,-1),h={class:"withdrawal-footer"},c={class:"currency-popup-title"},w={class:"currency-popup-main"},m=["onClick"],p=(0,l._)("span",null,null,-1);n(7658);e=n(299),e={name:"withdrawalId",data(){return{reqCount:0,curBank:{},showBank:!1,money:"",password:"",witObj:{},preventClick:!1,minMoney:0}},computed:{...(0,e.Se)(["getBanks","getUser"]),curBankList(){return this.getBanks[3]}},watch:{curBankList:{handler(t){t.length<=0&&this.reqCount<1&&(++this.reqCount,this.reqUserBank({bankType:3})),1<=t.length&&(this.curBank=t[0])},immediate:!0}},created(){this.getWthMoney(),this.$http.get("withdrawInfo").then((t=>{if(1e3===t.code)for(let n=0;n<t.data.length;n++){var e=t.data[n];if("withdrawAmountMinUsdt"===e.code){this.minMoney=Number(e.value);break}}else this.$error(t.message)}))},methods:{...(0,e.nv)(["reqUserBank","reqWallet"]),selectBank(t){t.id!==this.curBank.id&&(this.curBank=t)},sure(){var t;this.preventClick||(+this.money<=0?this.$error(this.$t("enterAmount")):+this.minMoney>+this.money?this.$error(this.$t("minWitAmount")+String(this.minMoney)+"USDT"):+this.witObj.optionBalance<this.money?this.$error(this.$t("exceedingBalance")):this.password?this.password.length<6?this.$error(this.$t("correctFundPW")):(t={money:this.money,password:this.password,bankId:this.curBank.id,coinCode:"USDT"},this.preventClick=!0,this.$http.post("withdraw",t).then((t=>{1e3===t.code?(this.money="",this.password="",this.$success(this.$t("witSuccess")),this.$router.back()):this.$error(t.message),setTimeout((()=>{this.preventClick=!1}),600)}))):this.$error(this.$t("enterFundPW")))},toRouter(t){this.$router.push({name:t})},getWthMoney(){this.$http.post("walletList").then((t=>{if(1e3===t.code&&0<t.data.length)for(let n=0;n<t.data.length;n++){var e=t.data[n];if("usdt"===e.coinCode.toLocaleLowerCase()){this.witObj=e;break}}else this.$error(t.message)}))},maxMoney(t){t&&(this.money=t)}}};var k=(0,n(9533).Z)(e,[["render",function(t,e,n,k,y,$){var _=(0,l.up)("v-header"),B=(0,l.up)("van-field"),g=(0,l.up)("van-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(_,{title:"USDT "+t.$t("withdrawal")},null,8,["title"]),(0,l._)("section",s,[(0,l._)("article",r,[(0,l._)("dl",null,[(0,l._)("dt",null,(0,a.zw)(t.$t("withdrawalTo")),1),(0,l._)("dd",null,[1<=$.curBankList.length?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"withdrawal-bank",onClick:e[0]||(e[0]=t=>y.showBank=!0)},[(0,l.Uk)((0,a.zw)(y.curBank.bankName)+" ",1),y.curBank.cardNumber?((0,l.wg)(),(0,l.iD)("span",o)):(0,l.kq)("",!0),d])):((0,l.wg)(),(0,l.iD)("div",{key:1,class:"withdrawal-bank-add",onClick:e[1]||(e[1]=t=>$.toRouter("addUsdt"))},[u,(0,l.Uk)(" "+(0,a.zw)(t.$t("addUsdtWallet")),1)]))])]),(0,l._)("dl",null,[(0,l._)("dt",null,(0,a.zw)(t.$t("address")),1),(0,l._)("dd",null,[(0,l.Wm)(B,{class:"withdrawal-input",maxlength:"25",modelValue:y.curBank.cardNumber,"onUpdate:modelValue":e[2]||(e[2]=t=>y.curBank.cardNumber=t),readonly:"",placeholder:t.$t("enterWalletAdr")},null,8,["modelValue","placeholder"])])]),(0,l._)("dl",null,[(0,l._)("dt",null,[(0,l.Uk)((0,a.zw)(t.$t("amount"))+" ",1),(0,l._)("section",null,[(0,l._)("p",null,[(0,l.Uk)((0,a.zw)(t.$t("available"))+": ",1),(0,l._)("span",null,(0,a.zw)(y.witObj.optionBalance)+" USDT",1)]),(0,l._)("p",null,[(0,l.Uk)((0,a.zw)(t.$t("minWitAmount"))+" ",1),(0,l._)("span",null,(0,a.zw)(y.minMoney)+" USDT",1)])])]),(0,l._)("dd",null,[(0,l.Wm)(B,{class:"withdrawal-input",maxlength:"25",modelValue:y.money,"onUpdate:modelValue":e[3]||(e[3]=t=>y.money=t),modelModifiers:{trim:!0},placeholder:"Minimum "+y.minMoney+" USDT"},null,8,["modelValue","placeholder"]),(0,l._)("p",{class:"withdrawal-max",onClick:e[4]||(e[4]=t=>$.maxMoney(y.witObj.optionBalance))},(0,a.zw)(t.$t("max")),1)])]),(0,l._)("dl",null,[(0,l._)("dt",null,(0,a.zw)(t.$t("witPW")),1),(0,l._)("dd",null,[(0,l.Wm)(B,{class:"withdrawal-input",maxlength:"15",modelValue:y.password,"onUpdate:modelValue":e[5]||(e[5]=t=>y.password=t),modelModifiers:{trim:!0},placeholder:t.$t("pw6to15")},null,8,["modelValue","placeholder"])])])]),(0,l._)("article",h,[(0,l._)("button",{type:"button",onClick:e[6]||(e[6]=t=>$.sure())},(0,a.zw)(t.$t("submit")),1)])]),(0,l.Wm)(g,{class:"currency-popup","close-on-click-overlay":!0,show:y.showBank,"onUpdate:show":e[7]||(e[7]=t=>y.showBank=t),position:"bottom",style:{backgroundColor:"#ffffff"}},{default:(0,l.w5)((()=>[(0,l._)("h2",c,(0,a.zw)(t.$t("selectBank")),1),(0,l._)("div",w,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)($.curBankList,((t,e)=>((0,l.wg)(),(0,l.iD)("dl",{key:e,onClick:e=>$.selectBank(t)},[(0,l._)("dt",null,[(0,l.Uk)((0,a.zw)(t.bankName)+" ",1),p]),(0,l.wy)((0,l._)("dd",null,null,512),[[i.F8,t.id===y.curBank.id]])],8,m)))),128))])])),_:1},8,["show"])],64)}]])}}]);