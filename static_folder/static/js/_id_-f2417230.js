import{n as a,e as s,D as e,p as l}from"./__vendor-38d4085c.js";import{C as t}from"./Card-c38245ed.js";import{u as i}from"./usePath-cad0276a.js";import{u as n}from"./index-8b7cd8a6.js";import{a as r}from"./index-7efd0a7c.js";import{d as o,b as c,r as d,k as p,e as u,f as v,x as _,u as m,_ as f,Y as g,F as y,a1 as h,$ as j,a0 as k,o as w,a3 as C}from"./_@vue-25e51883.js";import{_ as x}from"./_plugin-vue_export-helper-1b428a4d.js";/* empty css                                                             */import"./_pinia-b1a0e29c.js";import"./_axios-dc055ed6.js";const S=a=>(j("data-v-d940ec35"),a=a(),k(),a),I={class:"detail_page"},O={class:"video_controller"},$=["src"],b={class:"video_desc"},L={class:"video_desc_title"},N={key:0,class:"desc_list"},z={class:"play_no"},D=["src"],E={key:0,class:"tiem"},J=S((()=>v("span",null,"HD",-1))),R=S((()=>v("div",{class:"spacer"},null,-1))),U={class:"list_content"},F={class:"list_title"},H=S((()=>v("div",{class:"left"},[v("span",{class:"same_txt"}," Relevant Contents ")],-1))),M={class:"list_wrapper"},P=x(o({__name:"[id]",setup(o){const j=c(),k=a(),x=d({}),S=d([]);c(!1);const P=n(),T=c(!1),Y=s();p((async()=>{const a=await r.movie.detail({id:k.params.id});if(a.code)return;G(a.data.videoUrl,a.data.coverUrl),Object.assign(x,a.data),T.value=1===x.isfav,A();const s=JSON.parse(localStorage.userList);s.forEach((a=>{if(a.userId===P.userInfo.userId){if(15===a.len)return;a.len+=1}})),localStorage.userList=JSON.stringify(s),q()}));const q=async()=>{await r.movie.play({id:k.params.id})},A=async()=>{const a=await r.movie.newest({pageSize:6,pageNo:1});S.push(...a.data.result)},B=async()=>{if(T.value)return;(await r.movie.fav({id:k.params.id})).code||(T.value=!0)},G=(a,s)=>{new e({container:j.value,autoplay:!1,screenshot:!1,lang:"en",video:{url:a,pic:s,type:"hls"}})};return(a,s)=>{const e=l;return w(),u("div",I,[v("div",O,[v("div",{ref_key:"playerElement",ref:j,class:"player_container"},null,512),v("span",{class:"return_page",onClick:s[0]||(s[0]=s=>a.$router.go(-1))},[_(e,{name:"arrow-left",color:"#fff",size:"20"})]),v("div",{class:"like_icon",onClick:B},[v("img",{src:m(i)(m(T)?"like.png":"un_like.png"),alt:""},null,8,$)])]),v("div",b,[v("div",L,f(m(x).name),1),Object.keys(m(x)).length?(w(),u("div",N,[v("div",z,[v("img",{src:m(i)("play_icon.png"),alt:""},null,8,D),v("span",null,f(m(x).playCnt),1)]),m(x).length?(w(),u("div",E,[J,v("span",null,f(m(x).length),1)])):g("",!0)])):g("",!0)]),R,v("div",U,[v("div",F,[H,v("div",{class:"right",onClick:s[1]||(s[1]=a=>{return s=m(S)[1].catalogSecondLevelId,e=" Relevant Contents ",void Y.push(`/more/${s}/${e}`);var s,e})},"More")]),v("div",M,[(w(!0),u(y,null,h(m(S),(a=>(w(),C(t,{key:a.id,data:a,showType:2},null,8,["data"])))),128))])])])}}}),[["__scopeId","data-v-d940ec35"]]);export{P as default};
