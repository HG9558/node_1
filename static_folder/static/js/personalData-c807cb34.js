import{U as e,j as a,s as l,F as s,k as o,l as t,m as n}from"./__vendor-38d4085c.js";import{_ as r}from"./CommonHeader.vue_vue_type_style_index_0_lang-729ad2f0.js";import{u as d}from"./index-8b7cd8a6.js";import{a as u}from"./index-7efd0a7c.js";import{d as i,b as m,r as p,k as c,w as f,e as _,x as v,Z as g,f as h,F as b,o as j,J as k}from"./_@vue-25e51883.js";import{_ as x}from"./_plugin-vue_export-helper-1b428a4d.js";import"./_pinia-b1a0e29c.js";import"./_axios-dc055ed6.js";const V={class:"personal-data-wrapper"},w=x(i({__name:"personalData",setup(i){d();const x=m(""),w=m("1"),y=m([]),U=m(""),I=m(""),O=p({}),S=p({});c((()=>{N()}));const F=e=>{const a=new FormData;a.append("file",e.file),a.append("uploadFlag",3),a.append("userId",100123),a.append("validTime",10),fetch("https://upload.coindexsss.com/upload/UploadServlet",{method:"POST",body:a}).then((e=>e.json())).then((e=>{Object.assign(S,{headImg:e.data.images[0].oUrl})})).catch((e=>{}))},N=async()=>{const e=await u.user.getUserInfo();Object.assign(O,e.data),x.value=O.nickName,w.value=O.gender.toString(),I.value=O.personal,O.headImg&&y.value.push({url:O.headImg})},P=async e=>{const a=await u.user.updateUserInfo(S);a.code?l(a.msg):l("success")};return f(x,(e=>{e!==O.nickName&&Object.assign(S,{nickName:e})})),f(w,(e=>{e!==O.gender.toString()&&Object.assign(S,{gender:Number(e)})})),f(I,(e=>{e!==O.personal&&Object.assign(S,{personal:e})})),(l,d)=>{const u=r,i=e,m=s,p=o,c=t,f=n,O=a;return j(),_(b,null,[v(u,{title:"Personal Data",isShowRight:!0},{default:g((()=>[h("span",{class:"save",onClick:P},"Save")])),_:1}),h("div",V,[v(i,{modelValue:y.value,"onUpdate:modelValue":d[0]||(d[0]=e=>y.value=e),reupload:"","max-count":"1","after-read":F},null,8,["modelValue"])]),v(O,{ref_key:"formRef",ref:U},{default:g((()=>[v(f,{inset:""},{default:g((()=>[v(m,{modelValue:x.value,"onUpdate:modelValue":d[1]||(d[1]=e=>x.value=e),name:"pattern",label:"Nickname",placeholder:"enter a nickname",rules:[{validatorMessage:l.validatorMessage,message:"请输入正确内容"}]},null,8,["modelValue","rules"]),v(m,{name:"radio",label:"Gender"},{input:g((()=>[v(c,{modelValue:w.value,"onUpdate:modelValue":d[2]||(d[2]=e=>w.value=e),direction:"horizontal",shape:"dot"},{default:g((()=>[v(p,{name:"0","checked-color":"#ff5b5c","icon-size":"18px"},{default:g((()=>[k("male")])),_:1}),v(p,{name:"1","checked-color":"#ff5b5c","icon-size":"18px"},{default:g((()=>[k("Female")])),_:1})])),_:1},8,["modelValue"])])),_:1}),v(m,{modelValue:I.value,"onUpdate:modelValue":d[3]||(d[3]=e=>I.value=e),rows:"2",label:"Personal Profile",type:"textarea",placeholder:"Can you give me a brief introduction to yourself","label-align":"top","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1},512)],64)}}}),[["__scopeId","data-v-1e4a36a6"]]);export{w as default};
