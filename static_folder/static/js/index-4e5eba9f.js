import{e as a,p as e,q as s,r as l,t as n}from"./__vendor-38d4085c.js";import{C as t}from"./Card-c38245ed.js";import{u as o}from"./usePath-cad0276a.js";import{u as i}from"./index-8b7cd8a6.js";import{d as c,b as r,e as d,f as u,F as v,a1 as p,u as m,x as _,$ as f,a0 as h,o as g,_ as y,r as C,X as k,k as w,Z as j,q as x,G as D,a3 as I}from"./_@vue-25e51883.js";import{_ as b}from"./_plugin-vue_export-helper-1b428a4d.js";import{a as L}from"./index-7efd0a7c.js";/* empty css                                                             */import"./_pinia-b1a0e29c.js";import"./_axios-dc055ed6.js";const P=a=>(f("data-v-83790432"),a=a(),h(),a),R=P((()=>u("div",{class:"discover-header"},"Discover",-1))),$={class:"discover-content"},N=P((()=>u("div",{class:"discover-content-left"},null,-1))),S={class:"discover-content-right"},T=P((()=>u("div",{class:"title"},"Channel",-1))),q={class:"content"},z=["onClick"],E=P((()=>u("span",{class:"left"},"Return",-1))),U=b(c({__name:"discover",setup(s,{emit:l}){a();const n=i();r(["Recommend","New","Domestic","Europe","Japanese actress","Domestic large factories","Selfie"]);const t=()=>{l("closeClassify")};return(a,s)=>{const o=e;return g(),d(v,null,[R,u("div",$,[N,u("div",S,[T,u("div",q,[(g(!0),d(v,null,p(m(n).menuList,((a,e)=>(g(),d("div",{class:"channel-item",key:e,onClick:e=>(a=>{l("changeClassify",a)})(a)},y(a.name),9,z)))),128))]),u("div",{class:"return",onClick:t},[E,_(o,{name:"arrow",color:"#fe7e7f",size:"12px"})])])])],64)}}}),[["__scopeId","data-v-83790432"]]),F={class:"home_page"},G={class:"top_container"},J=(a=>(f("data-v-1978a23c"),a=a(),h(),a))((()=>u("span",{class:"search_icon"},"Discover",-1))),M=["src"],O={class:"home_pge_content"},X={key:0,class:"chassify_container"},Z={class:"card_wrapper"},A={class:"card_top_container"},B={class:"left_name"},H=["onClick"],K={class:"card_container"},Q={key:1,class:"scroll-wrapper"},V={class:"card_wrapper"},W=["src"],Y=b(c({__name:"index",setup(e){const c=r(0),f=C([]),h=r(0),b=r(1),P=r(!1),R=r(!1),$=C([{name:"Recommend"},{name:"New"}]),N=a(),S=i(),T=r(!1),q=r();k((()=>{Y()}));const z=a=>{var e;const s=$.findIndex((e=>e.name==a.name));null==(e=q.value)||e.scrollTo(s),T.value=!1},E=()=>{S.setMenuList($),T.value=!0},Y=async()=>{const a=await L.movie.top();$.push(...a.data),Object.values($).forEach((a=>{a.list=[]})),ea()},aa=a=>{1!==c.value&&ea()},ea=async()=>{if($[c.value].list.length)return;const a=await L.movie.catalog({level:0===c.value?0:1,catalogId:0===c.value?0:$[c.value].id});$[c.value].list.push(...a.data)};w((()=>{}));const sa=async()=>{const a=await L.movie.newest({pageSize:10,pageNo:b.value});0==a.code&&(h.value=a.data.totalCount,f.push(...a.data.result),b.value+=1,P.value=!1,f.length>=h.value&&(R.value=!0))};return(a,e)=>{const i=l,r=n,h=s;return g(),d("div",F,[u("div",G,[J,u("img",{src:m(o)("search_icon.png"),alt:"",onClick:e[0]||(e[0]=e=>a.$router.push("/search"))},null,8,M)]),u("div",O,[_(h,{active:m(c),"onUpdate:active":e[2]||(e[2]=a=>x(c)?c.value=a:null),swipeable:"",onChange:aa,ref_key:"tabsRef",ref:q},{default:j((()=>[(g(!0),d(v,null,p(m($),(a=>(g(),I(r,null,{title:j((()=>[u("span",null,y(a.name),1)])),default:j((()=>[1!==m(c)?(g(),d("div",X,[u("div",Z,[(g(!0),d(v,null,p(m($)[m(c)].list,((a,e)=>(g(),d("div",{class:"chassify_list",key:e},[u("div",A,[u("span",B,y(a.videoCatalog.name),1),u("span",{class:"more",onClick:e=>{return s=a.videoPageData.result[0].catalogSecondLevelId,l=a.videoCatalog.name,void N.push(`/more/${s}/${l}`);var s,l}},"more",8,H)]),u("div",K,[(g(!0),d(v,null,p(0===m(c)?a.videoPageData.result.slice(0,4):a.videoPageData.result,(a=>(g(),I(t,{key:a.id,data:a,showType:2},null,8,["data"])))),128))])])))),128))])])):(g(),d("div",Q,[_(i,{loading:m(P),"onUpdate:loading":e[1]||(e[1]=a=>x(P)?P.value=a:null),finished:m(R),"finished-text":"没有更多了",onLoad:sa,offset:300},{default:j((()=>[u("div",V,[(g(!0),d(v,null,p(m(f),(a=>(g(),I(t,{key:a.id,data:a,showType:2},null,8,["data"])))),128))])])),_:1},8,["loading","finished"])]))])),_:2},1024)))),256))])),_:1},8,["active"]),u("img",{src:m(o)("classify_icon.png"),alt:"",class:"classify_icon",onClick:E},null,8,W)]),u("div",{class:D(["discover_container",!m(T)&&"left_100"])},[_(U,{onCloseClassify:e[3]||(e[3]=a=>T.value=!1),onChangeClassify:z})],2)])}}}),[["__scopeId","data-v-1978a23c"]]);export{Y as default};
