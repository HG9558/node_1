import{e,F as a,C as s,s as l,h as t}from"./__vendor-38d4085c.js";import{u as o}from"./index-8b7cd8a6.js";import{a as n}from"./index-7efd0a7c.js";import{d as r,b as u,k as i,e as d,f as c,x as p,u as m,q as f,Z as v,$ as g,a0 as _,o as I}from"./_@vue-25e51883.js";import{_ as h}from"./_plugin-vue_export-helper-1b428a4d.js";import"./_pinia-b1a0e29c.js";import"./_axios-dc055ed6.js";const b=e=>(g("data-v-2bfcaf73"),e=e(),_(),e),x={class:"login_page"},V=b((()=>c("div",{class:"login_header"},[c("span",null,"Welcome Back，"),c("span",null,"Log In")],-1))),y={class:"form_wrapper"},k={class:"form_container"},w={class:"item"},U={class:"item"},j=b((()=>c("span",{class:"txt"}," Don’t have an accoun ",-1))),C={class:"rule"},L=b((()=>c("span",{class:"black_txt"},"I agree to the ",-1))),N=b((()=>c("span",{class:"blue_txt"},"Terms & Conditions ",-1))),S=b((()=>c("div",{class:"rule_txt"},[c("span",{class:"black_txt mr-3"},"and"),c("span",{class:"blue_txt"}," Privacy Policy")],-1))),E=h(r({__name:"login",setup(r){const g=u(""),_=u(""),h=u(["a","b"]),b=u(!1),E=e(),P=u(!1),$=o();i((()=>{/iphone|ipod|ipad/i.test(navigator.appVersion)&&document.addEventListener("blur",(e=>{document.documentElement.offsetHeight<=document.documentElement.clientHeight&&["input","textarea"].includes(e.target.localName)&&document.body.scrollIntoView()}),!0)}));const q=()=>{E.push("/register")},A=async()=>{if(b.value)return;if(!g.value)return l("User Name Cannot Be Empty");if(!_.value)return l("password cannot be empty");if(!/^[a-zA-Z0-9]{6,15}$/.test(g.value))return l("Incorrect Username");if(!/^[^\u4e00-\u9fa5]{6,15}$/.test(_.value))return l("incorrect password");b.value=!0;const e=await n.user.login({mobileNo:g.value,password:_.value});if(b.value=!1,e.code)return l(e.msg);if($.setUserInfo(e.data.userInfo),$.setToken(e.data.token),"guest"===e.data.userInfo.memberLevelCode){const a=localStorage.userList?JSON.parse(localStorage.userList):[];if(a.length){a.find((a=>a.userId===e.data.userInfo.userId))||a.push({userId:e.data.userInfo.userId,len:0})}else a.push({userId:e.data.userInfo.userId,len:0});localStorage.userList=JSON.stringify(a)}$.changeActive(0),E.replace("/")};return(e,l)=>{const o=a,n=t,r=s;return I(),d("div",x,[V,c("div",y,[c("div",k,[c("div",w,[p(o,{modelValue:m(g),"onUpdate:modelValue":l[0]||(l[0]=e=>f(g)?g.value=e:null),label:"UserName",placeholder:"UserName","label-align":"top"},null,8,["modelValue"])]),c("div",U,[p(o,{modelValue:m(_),"onUpdate:modelValue":l[1]||(l[1]=e=>f(_)?_.value=e:null),label:"Password",placeholder:"Password","label-align":"top","right-icon":"eye-o",onClickRightIcon:l[2]||(l[2]=e=>P.value=!m(P)),type:m(P)?"text":"password"},null,8,["modelValue","type"])])])]),c("div",{class:"login",onClick:A},"Log In"),c("div",{class:"txt_container"},[j,c("span",{class:"sign",onClick:q},"Sign up")]),c("div",C,[p(r,{modelValue:m(h),"onUpdate:modelValue":l[3]||(l[3]=e=>f(h)?h.value=e:null),shape:"square"},{default:v((()=>[p(n,{name:"a"},{default:v((()=>[L,N,S])),_:1})])),_:1},8,["modelValue"])])])}}}),[["__scopeId","data-v-2bfcaf73"]]);export{E as default};
